/**
 * lc_micro_slider.js - lightweight responsive slider with jquery.touchSwipe.js integration
 * Version: 1.2
 * Author: Luca Montanari aka LCweb
 * Website: http://www.lcweb.it
 * Licensed under the MIT license
 */

(function(d){var p=function(n,c){var f=d.extend({slide_fx:"fadeslide",nav_arrows:!0,nav_dots:!0,slideshow_cmd:!0,carousel:!0,touchswipe:!0,autoplay:!1,animation_time:700,slideshow_time:5E3,pause_on_hover:!0,loader_code:'<span class="lcms_loader"></span>'},c),m=d(n);m.data("lcms_vars",{slides:[],shown_slide:0,cached_img:[],is_sliding:!1,is_playing:!1,paused_on_hover:!1});m.data("lcms_settings",f);var q=function(b,k,e){var l=b.data("lcms_vars"),c=b.data("lcms_settings"),g=l.slides[e],h=g.img?"lcms_preload":
"",c=g.img?c.loader_code:"",f;switch(k){case "init":f="lcms_active_slide";break;case "fade":f="lcms_fadein";break;case "prev":f="lcms_before";break;case "next":f="lcms_after"}b.find(".lcms_nav_dots span").removeClass("lcms_sel_dot");b.find(".lcms_nav_dots span").eq(e).addClass("lcms_sel_dot");k=g.img?'<div class="lcms_bg" style="background-image: url('+g.img+');"></div>':"";var m=d.trim(g.content)?'<div class="lcms_content">'+g.content+"</div>":"",h='<div class="lcms_slide '+f+" "+h+'" rel="'+e+'"><div class="lcms_inner '+
g.classes+'">'+k+m+"</div>"+c+"</div>";b.find(".lcms_container").append(h);g.img&&(-1===d.inArray(g.img,l.cached_img)?d("<img/>").bind("load",function(){l.cached_img.push(this.src);d(".lcms_slide[rel="+e+"]").removeClass("lcms_preload");d(".lcms_slide[rel="+e+"]").find("> *").not(".lcms_inner").fadeOut(300,function(){d(this).remove()});b.trigger("lcms_slide_shown",[e,g]);d(".lcms_slide[rel="+e+"]").hasClass("lcms_active_slide")&&b.trigger("lcms_initial_slide_shown",[e,g])}).attr("src",g.img):(d(".lcms_slide[rel="+
e+"]").removeClass("lcms_preload").addClass("lcms_cached"),d(".lcms_slide[rel="+e+"]").find("> *").not(".lcms_inner").remove(),b.trigger("lcms_slide_shown",[e,g])));1<l.slides.length&&(h=e<l.slides.length-1?e+1:0,-1===d.inArray(l.slides[h].img,l.cached_img)&&d("<img/>").bind("load",function(){l.cached_img.push(this.src)}).attr("src",l.slides[h].img));2<l.slides.length&&(h=e?e-1:l.slides.length-1,-1===d.inArray(l.slides[h].img,l.cached_img)&&d("<img/>").bind("load",function(){l.cached_img.push(this.src)}).attr("src",
l.slides[h].img))};lcms_slide=function(b,k){var e=b.data("lcms_vars"),c=b.data("lcms_settings"),f=c.animation_time,g=e.shown_slide;if(!c.carousel&&("prev"==k&&!e.shown_slide||"next"==k&&e.shown_slide==e.slides.length-1)||e.lcms_is_sliding||1==e.slides.length||"number"==typeof k&&(0>k||k>e.slides.length-1))return!1;e.lcms_is_sliding=!0;if("prev"==k)var h=0===g?e.slides.length-1:g-1;else"next"==k?h=g==e.slides.length-1?0:g+1:(h=k,k=h>g?"next":"prev");b.find(".lcms_active_slide").addClass("lcms_prepare_for_"+
k);q(b,"fade"==c.slide_fx?"fade":k,h);e.shown_slide=h;b.trigger("lcms_changing_slide",[h,e.slides[h],g]);"fade"==c.slide_fx?b.find(".lcms_active_slide").fadeOut(f):"slide"==c.slide_fx?"prev"==k?(b.find(".lcms_before").css("left","-100%").animate({left:"0%"},f),b.find(".lcms_active_slide").animate({left:"100%"},f)):(b.find(".lcms_after").css("left","100%").animate({left:"0%"},f),b.find(".lcms_active_slide").animate({left:"-100%"},f)):"fadeslide"==c.slide_fx?"prev"==k?(b.find(".lcms_before").fadeTo(0,
0).animate({left:"0%",opacity:1},f),b.find(".lcms_active_slide").animate({left:"100%",opacity:0},f)):(b.find(".lcms_after").fadeTo(0,0).animate({left:"0%",opacity:1},f),b.find(".lcms_active_slide").animate({left:"-100%",opacity:0},f)):"zoom-in"==c.slide_fx?b.find(".lcms_before, .lcms_after").fadeTo(0,0).animate({opacity:1},{step:function(b,c){var e=.5+b/2;d(this).css("-ms-transform","scale("+e+")").css("-webkit-transform","scale("+e+")").css("transform","scale("+e+")")},duration:f}):"zoom-out"==c.slide_fx&&
b.find(".lcms_before, .lcms_after").fadeTo(0,0).animate({opacity:1},{step:function(b,e){var c=1.5-b/2;d(this).css("-ms-transform","scale("+c+")").css("-webkit-transform","scale("+c+")").css("transform","scale("+c+")")},duration:f});setTimeout(function(){b.find(".lcms_active_slide").remove();b.find(".lcms_slide").removeClass("lcms_fadein lcms_before lcms_after").addClass("lcms_active_slide");e.lcms_is_sliding=!1;b.trigger("lcms_new_active_slide",[h,e.slides[h]])},f)};d(".lcms_prev").unbind("click");
m.delegate(".lcms_play","click",function(){var b=d(this).parents(".lcms_wrap").parent();jQuery(this).hasClass("lcms_pause")?b.lcms_stop_slideshow():b.lcms_start_slideshow()});d(".lcms_prev").unbind("click");m.delegate(".lcms_prev:not(.lcms_disabled)","click",function(){var b=d(this).parents(".lcms_wrap").parent();"undefined"!=typeof lcms_one_click&&clearTimeout(lcms_one_click);lcms_one_click=setTimeout(function(){b.lcms_stop_slideshow();lcms_slide(b,"prev")},5)});d(".lcms_next").unbind("click");m.delegate(".lcms_next:not(.lcms_disabled)",
"click",function(){var b=d(this).parents(".lcms_wrap").parent();"undefined"!=typeof lcms_one_click&&clearTimeout(lcms_one_click);lcms_one_click=setTimeout(function(){b.lcms_stop_slideshow();lcms_slide(b,"next")},5)});d(".lcms_next").unbind("click");m.delegate(".lcms_nav_dots span:not(.lcms_sel_dot)","click",function(){var b=d(this).parents(".lcms_wrap").parent(),c=parseInt(jQuery(this).attr("rel"));"undefined"!=typeof lcms_one_click&&clearTimeout(lcms_one_click);lcms_one_click=setTimeout(function(){b.lcms_stop_slideshow();
lcms_slide(b,c)},5)});var p=function(){d(".lcms_wrap").swipe({swipeRight:function(){var b=jQuery(this).parent();b.lcms_stop_slideshow();lcms_slide(b,"prev")},swipeLeft:function(){var b=jQuery(this).parent();b.lcms_stop_slideshow();lcms_slide(b,"next")},threshold:40,allowPageScroll:"vertical"})};f.pause_on_hover&&m.delegate(".lcms_wrap","mouseenter",function(){var b=d(this).parent(),c=b.data("lcms_vars");b.data("lcms_settings");c.is_playing&&(b.lcms_stop_slideshow(),c.paused_on_hover=!0)}).delegate(".lcms_wrap",
"mouseleave",function(){var b=d(this).parent(),c=b.data("lcms_vars");b.data("lcms_settings");c.paused_on_hover&&(b.lcms_start_slideshow(),c.paused_on_hover=!1)});(function(b){var c=b.data("lcms_vars"),e=b.data("lcms_settings");b.find("li").each(function(b,e){d(this).find("noscript").remove();var f={content:d(this).html(),img:d(this).attr("lcms_img"),classes:"undefined"==typeof d(this).attr("class")?"":d(this).attr("class")};c.slides.push(f)});b.html('<div class="lcms_wrap"><div class="lcms_container"></div></div>');
c.shown_slide=0;q(b,"init",0);e.nav_arrows&&1<c.slides.length&&b.find(".lcms_wrap").addClass("lcms_has_nav_arr").prepend('<div class="lcms_nav"><span class="lcms_prev"></span><span class="lcms_next"></span></div>');if(e.nav_dots&&1<c.slides.length){var f='<div class="lcms_nav_dots">';for(a=0;a<c.slides.length;a++)f+='<span rel="'+a+'"></span>';b.find(".lcms_wrap").addClass("lcms_has_nav_dots").prepend(f+"</div>");b.find(".lcms_nav_dots span").first().addClass("lcms_sel_dot")}e.slideshow_cmd&&1<c.slides.length&&
b.find(".lcms_wrap").addClass("lcms_has_ss_cmd").prepend('<div class="lcms_play"><span></span></div>');e.autoplay&&b.lcms_start_slideshow();b.trigger("lcms_ready");d(document).ready(function(b){"function"==typeof d.fn.swipe&&p()})})(m);return this};d.fn.lc_micro_slider=function(n){d.fn.lcms_destroy=function(){var c=d(this);c.find(".lcms_wrap").remove();var f=c.data("lcms_vars");f.is_playing&&clearInterval(f.is_playing);c.find(".lcms_next, .lcms_prev").undelegate("click");c.removeData("lcms_vars");
c.removeData("lcms_settings");c.removeData("lc_micro_slider");return!0};d.fn.lcms_paginate=function(c){var f=d(this);f.data("lcms_vars");f.data("lcms_settings");f.lcms_stop_slideshow();lcms_slide(f,c);return!0};d.fn.lcms_start_slideshow=function(){var c=d(this),f=c.data("lcms_vars"),m=c.data("lcms_settings");f.is_playing=setInterval(function(){lcms_slide(c,"next")},m.slideshow_time+m.animation_time);c.find(".lcms_play").addClass("lcms_pause");c.trigger("lcms_play_slideshow");return!0};d.fn.lcms_stop_slideshow=
function(){var c=d(this),f=c.data("lcms_vars");c.data("lcms_settings");clearInterval(f.is_playing);f.is_playing=null;c.find(".lcms_play").removeClass("lcms_pause");c.trigger("lcms_stop_slideshow");return!0};return this.each(function(){if(d(this).data("lc_micro_slider"))return d(this).data("lc_micro_slider");var c=new p(this,n);d(this).data("lc_micro_slider",c)})}})(jQuery);